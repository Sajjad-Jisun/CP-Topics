In directed graph -
1) use topo sort 

2)
void dfs(ll node, vector<vector<ll>>&v, vector<ll>&vis){
    vis[node]=2;

    for(auto child:v[node]){
        if(!vis[child])dfs(child,v,vis);
        else if(vis[child]==2) cycle=true;
    }
    vis[node]=1;
}
